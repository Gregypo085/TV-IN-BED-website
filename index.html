<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TV IN BED | Electronic Music Artist</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="nav-logo">
                <h1>TV IN BED</h1>
            </div>
            <ul class="nav-links">
                <li><a href="#about">About</a></li>
                <li><a href="#music">Music</a></li>
                <li><a href="#listen">Listen</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
            <div class="auth-section">
                <div id="auth-loading" class="auth-loading" style="display: none;">
                    <span>Loading...</span>
                </div>
                <div id="signed-out-state" class="auth-state">
                    <button id="google-signin-btn" class="auth-btn">
                        <span>Sign in with Google</span>
                    </button>
                </div>
                <div id="signed-in-state" class="auth-state" style="display: none;">
                    <div class="user-info">
                        <img id="user-avatar" src="" alt="User Avatar" class="user-avatar">
                        <span id="user-name"></span>
                    </div>
                    <button id="signout-btn" class="auth-btn signout-btn">Sign Out</button>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <section class="hero">
            <div class="hero-content">
                <div class="hero-text">
                    <h2 class="hero-title">TV IN BED</h2>
                    <p class="hero-subtitle">Electronic Music from Philadelphia</p>
                    <p class="hero-description">A journey through digital landscapes of the past, inspired by video game music and the dawn of the internet era.</p>
                    <div class="hero-buttons">
                        <a href="#music" class="btn btn-primary">Latest Album</a>
                        <a href="#listen" class="btn btn-secondary">Listen Now</a>
                    </div>
                </div>
                <div class="hero-visual">
                    <a href="https://linktr.ee/tvinbed" target="_blank">
                        <img src="https://f4.bcbits.com/img/a2200546667_10.jpg" alt="TV IN BED Album Cover" class="hero-album-cover">
                    </a>
                </div>
            </div>
        </section>

        <section id="about" class="about">
            <div class="container">
                <h2>About</h2>
                <div class="about-content">
                    <p>TV IN BED creates electronic music that explores the spectrum of emotions through melodic synth tunes and dreamy smooth retro vibes. Drawing influence from icons like Vangelis and Hans Zimmer, the music is raw and honest, focusing on personal experiences and dreams.</p>
                    <p>Based in Philadelphia, Pennsylvania, TV IN BED crafts soundscapes inspired by the transformative power of music in video games and the early internet era, taking listeners on nostalgic journeys through digital landscapes of the past.</p>
                </div>
                <div class="genres">
                    <span class="genre-tag">Chillwave</span>
                    <span class="genre-tag">Downtempo</span>
                    <span class="genre-tag">Dreamwave</span>
                    <span class="genre-tag">Retrowave</span>
                    <span class="genre-tag">Synthwave</span>
                    <span class="genre-tag">Vaporwave</span>
                </div>
            </div>
        </section>

        <section id="music" class="music">
            <div class="container">
                <h2>Latest Album</h2>
                <div class="album">
                    <div class="album-artwork">
                        <img src="https://f4.bcbits.com/img/a2200546667_10.jpg" alt="TV IN BED Album Cover" class="album-cover">
                    </div>
                    <div class="album-info">
                        <h3 class="album-title">TV IN BED</h3>
                        <p class="album-details">Debut Album • March 8, 2024 • 13 Tracks</p>
                        <p class="album-description">A journey through the digital landscapes of the past, inspired by the transformative power of music in video games and the dawn of the internet era.</p>
                        
                        <div class="bandcamp-player">
                            <h4>Listen Now</h4>
                            <iframe style="border: 0; width: 100%; height: 588px; background: transparent;" src="https://bandcamp.com/EmbeddedPlayer/album=690972472/size=large/bgcol=000000/linkcol=6366f1/tracklist=true/artwork=small/" seamless>
                                <a href="https://tvinbed.bandcamp.com/album/tv-in-bed-2">TV IN BED by TV IN BED</a>
                            </iframe>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="listen" class="listen">
            <div class="container">
                <h2>Listen</h2>
                <div class="streaming-links">
                    <a href="https://tvinbed.bandcamp.com/album/tv-in-bed-2" class="streaming-link" target="_blank">
                        <span class="platform">Bandcamp</span>
                        <span class="action">Stream & Download</span>
                    </a>
                    <a href="https://open.spotify.com/artist/2yYL8Msg8ZlSSN0afxkStT?si=sC_kwCZXS5aqvFb7E60GwA" class="streaming-link" target="_blank">
                        <span class="platform">Spotify</span>
                        <span class="action">Stream</span>
                    </a>
                    <a href="https://www.youtube.com/@tvinbed5332" class="streaming-link" target="_blank">
                        <span class="platform">YouTube</span>
                        <span class="action">Watch & Listen</span>
                    </a>
                    <a href="https://music.apple.com/us/artist/tv-in-bed/1646735325" class="streaming-link" target="_blank">
                        <span class="platform">Apple Music</span>
                        <span class="action">Stream</span>
                    </a>
                    <a href="https://www.instagram.com/tvinbedmusic" class="streaming-link" target="_blank">
                        <span class="platform">Instagram</span>
                        <span class="action">Follow</span>
                    </a>
                    <a href="https://linktr.ee/tvinbed" class="streaming-link" target="_blank">
                        <span class="platform">Linktr.ee</span>
                        <span class="action">All Links</span>
                    </a>
                </div>
            </div>
        </section>

        <section id="contact" class="contact">
            <div class="container">
                <h2>Connect</h2>
                <div class="social-links">
                    <a href="#" class="social-link" target="_blank">
                        <span>Twitter</span>
                    </a>
                    <a href="#" class="social-link" target="_blank">
                        <span>Instagram</span>
                    </a>
                    <a href="#" class="social-link" target="_blank">
                        <span>YouTube</span>
                    </a>
                    <a href="https://tvinbed.bandcamp.com" class="social-link" target="_blank">
                        <span>Bandcamp</span>
                    </a>
                </div>
                <div class="contact-info">
                    <p>For bookings, collaborations, and inquiries:</p>
                    <p><strong>Philadelphia, PA</strong></p>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 TV IN BED. All rights reserved.</p>
        </div>
    </footer>

    <script src="script.js"></script>
    <script type="module" src="auth.js"></script>
    <script type="module">
        import { signInWithGoogle, signOutUser, onAuthStateChange, handleRedirectResult } from './auth.js';
        
        // DOM elements
        const googleSignInBtn = document.getElementById('google-signin-btn');
        const signOutBtn = document.getElementById('signout-btn');
        const signedOutState = document.getElementById('signed-out-state');
        const signedInState = document.getElementById('signed-in-state');
        const authLoading = document.getElementById('auth-loading');
        const userAvatar = document.getElementById('user-avatar');
        const userName = document.getElementById('user-name');
        
        // Show loading state
        const showLoading = () => {
            authLoading.style.display = 'block';
            signedOutState.style.display = 'none';
            signedInState.style.display = 'none';
        };
        
        // Show signed out state
        const showSignedOut = () => {
            authLoading.style.display = 'none';
            signedOutState.style.display = 'block';
            signedInState.style.display = 'none';
        };
        
        // Show signed in state
        const showSignedIn = (user) => {
            authLoading.style.display = 'none';
            signedOutState.style.display = 'none';
            signedInState.style.display = 'flex';
            userAvatar.src = user.photoURL || '';
            userName.textContent = user.displayName || user.email;
        };
        
        // Google Sign In event
        googleSignInBtn.addEventListener('click', async () => {
            showLoading();
            try {
                await signInWithGoogle();
            } catch (error) {
                console.error('Sign in failed:', error);
                showSignedOut();
            }
        });
        
        // Sign Out event
        signOutBtn.addEventListener('click', async () => {
            showLoading();
            try {
                await signOutUser();
            } catch (error) {
                console.error('Sign out failed:', error);
            }
        });
        
        // Handle redirect result on page load
        handleRedirectResult().catch(console.error);
        
        // Listen for auth state changes
        onAuthStateChange((user) => {
            if (user) {
                showSignedIn(user);
                console.log('User is signed in:', user.displayName);
                // Redirect to exclusive content after successful sign in
                setTimeout(() => {
                    window.location.href = 'exclusive.html';
                }, 1000);
            } else {
                showSignedOut();
                console.log('User is signed out');
            }
        });
    </script>
</body>
</html>